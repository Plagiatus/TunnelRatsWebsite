var ut=Object.defineProperty;var Te=t=>{throw TypeError(t)};var lt=(t,e,r)=>e in t?ut(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var j=(t,e,r)=>lt(t,typeof e!="symbol"?e+"":e,r),le=(t,e,r)=>e.has(t)||Te("Cannot "+r);var a=(t,e,r)=>(le(t,e,"read from private field"),r?r.call(t):e.get(t)),A=(t,e,r)=>e.has(t)?Te("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),_=(t,e,r,n)=>(le(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),u=(t,e,r)=>(le(t,e,"access private method"),r);import{t as me,a as ie,c as ht}from"../chunks/YgMqriwU.js";import{k as dt,l as gt,r as he,m as R,u as yt,z as pt,g as D,as as bt,A as vt,B as Ie,q as de,t as X,R as mt,C as De,D as Be,F as wt,av as ge,X as Ue,f as Ne,aw as _t,ak as Lt,s as xe,ax as Et,ay as Ot,W as Tt,az as It,ad as Nt,aA as xt,aB as Rt,p as At,j as St,G as $t,y as Dt,I as Bt,Z as we,a9 as Z,a6 as Ce,_ as _e,a7 as V,a8 as H,af as Ut,c as Re,a5 as Me,a4 as Ct,$ as Mt}from"../chunks/BxylWL3j.js";import{h as kt}from"../chunks/DZaqJdkz.js";import{p as Yt}from"../chunks/C8yGFa8k.js";import{d as Ft,s as G}from"../chunks/CbZv9Eud.js";import{a as Pt}from"../chunks/iV8a0R1G.js";import{b as zt,i as Ht}from"../chunks/i_VayAUT.js";function jt(t,e){return e}function Vt(t,e,r,n){for(var s=[],o=e.length,f=0;f<o;f++)Ot(e[f].e,s,!0);var d=o>0&&s.length===0&&r!==null;if(d){var h=r.parentNode;Tt(h),h.append(r),n.clear(),k(t,e[0].prev,e[o-1].next)}It(s,()=>{for(var g=0;g<o;g++){var l=e[g];d||(n.delete(l.k),k(t,l.prev,l.next)),Nt(l.e,!d)}})}function Wt(t,e,r,n,s,o=null){var f=t,d={items:new Map,first:null};{var h=t;f=R?he(yt(h)):h.appendChild(dt())}R&&pt();var g=null,l=!1,y=bt(()=>{var b=r();return St(b)?b:b==null?[]:Ue(b)});gt(()=>{var b=D(y),v=b.length;if(l&&v===0)return;l=v===0;let m=!1;if(R){var B=f.data===vt;B!==(v===0)&&(f=Ie(),he(f),de(!1),m=!0)}if(R){for(var U=null,w,O=0;O<v;O++){if(X.nodeType===8&&X.data===mt){f=X,m=!0,de(!1);break}var K=b[O],F=n(K,O);w=ke(X,d,U,null,K,F,O,s,e,r),d.items.set(F,w),U=w}v>0&&he(Ie())}R||Zt(b,d,f,s,e,n,r),o!==null&&(v===0?g?De(g):g=Be(()=>o(f)):g!==null&&wt(g,()=>{g=null})),m&&de(!0),D(y)}),R&&(f=X)}function Zt(t,e,r,n,s,o,f){var d=t.length,h=e.items,g=e.first,l=g,y,b=null,v=[],m=[],B,U,w,O;for(O=0;O<d;O+=1){if(B=t[O],U=o(B,O),w=h.get(U),w===void 0){var K=l?l.e.nodes_start:r;b=ke(K,e,b,b===null?e.first:b.next,B,U,O,n,s,f),h.set(U,b),v=[],m=[],l=b.next;continue}if(Xt(w,B,O),w.e.f&ge&&De(w.e),w!==l){if(y!==void 0&&y.has(w)){if(v.length<m.length){var F=m[0],C;b=F.prev;var Oe=v[0],ce=v[v.length-1];for(C=0;C<v.length;C+=1)Ae(v[C],F,r);for(C=0;C<m.length;C+=1)y.delete(m[C]);k(e,Oe.prev,ce.next),k(e,b,Oe),k(e,ce,F),l=F,b=ce,O-=1,v=[],m=[]}else y.delete(w),Ae(w,l,r),k(e,w.prev,w.next),k(e,w,b===null?e.first:b.next),k(e,b,w),b=w;continue}for(v=[],m=[];l!==null&&l.k!==U;)l.e.f&ge||(y??(y=new Set)).add(l),m.push(l),l=l.next;if(l===null)continue;w=l}v.push(w),b=w,l=w.next}if(l!==null||y!==void 0){for(var ue=y===void 0?[]:Ue(y);l!==null;)l.e.f&ge||ue.push(l),l=l.next;var ft=ue.length;if(ft>0){var ct=d===0?r:null;Vt(e,ue,ct,h)}}Ne.first=e.first&&e.first.e,Ne.last=b&&b.e}function Xt(t,e,r,n){_t(t.v,e),t.i=r}function ke(t,e,r,n,s,o,f,d,h,g){var l=(h&xt)!==0,y=(h&Rt)===0,b=l?y?Lt(s):xe(s):s,v=h&Et?xe(f):f,m={i:v,v:b,k:o,a:null,e:null,prev:r,next:n};try{return m.e=Be(()=>d(t,b,v,g),R),m.e.prev=r&&r.e,m.e.next=n&&n.e,r===null?e.first=m:(r.next=m,r.e.next=m.e),n!==null&&(n.prev=m,n.e.prev=m.e),m}finally{}}function Ae(t,e,r){for(var n=t.next?t.next.e.nodes_start:r,s=e?e.e.nodes_start:r,o=t.e.nodes_start;o!==n;){var f=At(o);s.before(o),o=f}}function k(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function qt(t,e,r){$t(()=>{var n=Dt(()=>e(t,r==null?void 0:r())||{});if(n!=null&&n.destroy)return()=>n.destroy()})}function Ye(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(r=Ye(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function Qt(){for(var t,e,r=0,n="",s=arguments.length;r<s;r++)(t=arguments[r])&&(e=Ye(t))&&(n&&(n+=" "),n+=e);return n}function Jt(t){return typeof t=="object"?Qt(t):t??""}function Kt(t,e,r){var n=t.__className,s=Gt(e,r);R&&t.className===s?t.__className=s:(n!==s||R&&t.className!==s)&&(t.className=s,t.__className=s)}function Gt(t,e){return(t??"")+(" "+e)}function er(t,e,r=e){Pt(t,"change",()=>{r(t.files)}),R&&t.files&&r(t.files),Bt(()=>{t.files=e()})}/**
 * @module mutf-8
 * @copyright 2020 sciencesakura
 * @license MIT
 */var I=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},q=function(t,e,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r},S,ee,te,$,Fe,P;class tr{get encoding(){return"mutf-8"}get fatal(){return I(this,ee,"f")}get ignoreBOM(){return I(this,te,"f")}constructor(e="mutf-8",r={}){var n,s;S.add(this),ee.set(this,void 0),te.set(this,void 0),$.set(this,void 0);const o=e.toLowerCase();if(o!=="mutf-8"&&o!=="mutf8")throw new RangeError(`MUtf8Decoder.constructor: '${e}' is not supported.`);q(this,ee,(n=r.fatal)!==null&&n!==void 0?n:!1,"f"),q(this,te,(s=r.ignoreBOM)!==null&&s!==void 0?s:!1,"f")}decode(e,r={}){var n;const s=(n=r.stream)!==null&&n!==void 0?n:!1,o=I(this,S,"m",Fe).call(this,e),f=o.length,d=[];let h=0;for(;h<f;){const g=o[h++];if(!(g&128)&&g!==0)d.push(String.fromCharCode(g));else if((g&224)===192){if(f<=h){if(s){q(this,$,o.slice(h-1),"f");break}d.push(I(this,S,"m",P).call(this));continue}const l=o[h++];if((l&192)!==128){d.push(I(this,S,"m",P).call(this)),h--;continue}d.push(String.fromCharCode((g&31)<<6|l&63))}else if((g&240)===224){if(f<=h+1){if(s){q(this,$,o.slice(h-1),"f");break}d.push(I(this,S,"m",P).call(this));continue}const l=o[h++];if((l&192)!==128){d.push(I(this,S,"m",P).call(this)),h--;continue}const y=o[h++];if((y&192)!==128){d.push(I(this,S,"m",P).call(this)),h-=2;continue}if(h===3&&g===239&&l===187&&y===191&&!this.ignoreBOM)continue;d.push(String.fromCharCode((g&15)<<12|(l&63)<<6|y&63))}else d.push(I(this,S,"m",P).call(this))}return d.join("")}}ee=new WeakMap,te=new WeakMap,$=new WeakMap,S=new WeakSet,Fe=function(e){let r;if(e instanceof Uint8Array?r=e:r=new Uint8Array("buffer"in e?e.buffer:e),!I(this,$,"f"))return r;const n=new Uint8Array(I(this,$,"f").length+r.length);return n.set(I(this,$,"f"),0),n.set(r,I(this,$,"f").length),q(this,$,void 0,"f"),n},P=function(){if(this.fatal)throw new TypeError("MUtf8Decoder.decode: Decoding failed.");return"ï¿½"};var J;const Ee=class Ee{constructor(e,r={}){j(this,"data");j(this,"rootName");j(this,"endian");j(this,"compression");j(this,"bedrockLevel");A(this,J,null);e instanceof Ee&&(r.rootName===void 0&&(r.rootName=e.rootName),r.endian===void 0&&(r.endian=e.endian),r.compression===void 0&&(r.compression=e.compression),r.bedrockLevel===void 0&&(r.bedrockLevel=e.bedrockLevel),e=e.data);const{rootName:n="",endian:s="big",compression:o=null,bedrockLevel:f=!1}=r;this.data=e,this.rootName=n,this.endian=s,this.compression=o,this.bedrockLevel=f}get byteOffset(){return a(this,J)}set byteOffset(e){_(this,J,e)}get[Symbol.toStringTag](){return"NBTData"}};J=new WeakMap;let ae=Ee;const fe=Symbol.for("nodejs.util.inspect.custom");class Pe extends Number{constructor(e){super(e<<24>>24)}valueOf(){return super.valueOf()}get[Symbol.toStringTag](){return"Int8"}get[fe](){return(e,{stylize:r})=>r(`${this.valueOf()}b`,"number")}}class ze extends Number{constructor(e){super(e<<16>>16)}valueOf(){return super.valueOf()}get[Symbol.toStringTag](){return"Int16"}get[fe](){return(e,{stylize:r})=>r(`${this.valueOf()}s`,"number")}}class ye extends Number{constructor(e){super(e|0)}valueOf(){return super.valueOf()}get[Symbol.toStringTag](){return"Int32"}get[fe](){return()=>this.valueOf()}}class He extends Number{constructor(e){super(e)}valueOf(){return super.valueOf()}get[Symbol.toStringTag](){return"Float32"}get[fe](){return(e,{stylize:r})=>r(`${this.valueOf()}f`,"number")}}var c;(function(t){t[t.END=0]="END",t[t.BYTE=1]="BYTE",t[t.SHORT=2]="SHORT",t[t.INT=3]="INT",t[t.LONG=4]="LONG",t[t.FLOAT=5]="FLOAT",t[t.DOUBLE=6]="DOUBLE",t[t.BYTE_ARRAY=7]="BYTE_ARRAY",t[t.STRING=8]="STRING",t[t.LIST=9]="LIST",t[t.COMPOUND=10]="COMPOUND",t[t.INT_ARRAY=11]="INT_ARRAY",t[t.LONG_ARRAY=12]="LONG_ARRAY"})(c||(c={}));Object.freeze(c);const rr=Symbol("nbtify.tag.type");function je(t){return Y(t)!==null}function nr(t){return typeof t=="number"&&t in c}function Y(t){switch(!0){case t instanceof Pe:case typeof t=="boolean":return c.BYTE;case t instanceof ze:return c.SHORT;case t instanceof ye:return c.INT;case typeof t=="bigint":return c.LONG;case t instanceof He:return c.FLOAT;case typeof t=="number":return c.DOUBLE;case t instanceof Int8Array:case t instanceof Uint8Array:return c.BYTE_ARRAY;case typeof t=="string":return c.STRING;case t instanceof Array:return c.LIST;case t instanceof Int32Array:case t instanceof Uint32Array:return c.INT_ARRAY;case t instanceof BigInt64Array:case t instanceof BigUint64Array:return c.LONG_ARRAY;case(typeof t=="object"&&t!==null):return c.COMPOUND;default:return null}}async function Ve(t,e){const r=new DecompressionStream(e);return sr(t,r)}async function sr(t,{readable:e,writable:r}){const n=r.getWriter();n.write(t).catch(()=>{}),n.close().catch(()=>{});const s=[];let o=0;const f=ir(e);for await(const g of f)s.push(g),o+=g.byteLength;const d=new Uint8Array(o);let h=0;for(const g of s)d.set(g,h),h+=g.byteLength;return d}function ir(t){return typeof t[Symbol.asyncIterator]>"u"?ar(t):t}async function*ar(t){const e=t.getReader();try{for(;;){const{done:r,value:n}=await e.read();if(r)return;yield n}}finally{e.releaseLock()}}async function M(t,e={}){if(t instanceof Blob&&(t=await t.arrayBuffer()),"byteOffset"in t||(t=new Uint8Array(t)),!(t instanceof Uint8Array))throw new TypeError("First parameter must be a Uint8Array, ArrayBuffer, SharedArrayBuffer, or Blob");const r=new or(t,e.endian!=="big",e.endian==="little-varint");let{rootName:n,endian:s,compression:o,bedrockLevel:f,strict:d=!0}=e;if(n!==void 0&&typeof n!="boolean"&&typeof n!="string"&&n!==null)throw new TypeError("Root Name option must be a boolean, string, or null");if(s!==void 0&&s!=="big"&&s!=="little"&&s!=="little-varint")throw new TypeError("Endian option must be a valid endian type");if(o!==void 0&&o!=="deflate"&&o!=="deflate-raw"&&o!=="gzip"&&o!==null)throw new TypeError("Compression option must be a valid compression type");if(f!==void 0&&typeof f!="boolean"&&typeof f!="number"&&f!==null)throw new TypeError("Bedrock Level option must be a boolean, number, or null");if(typeof d!="boolean")throw new TypeError("Strict option must be a boolean");e:if(o===void 0){switch(!0){case r.hasGzipHeader():o="gzip";break e;case r.hasZlibHeader():o="deflate";break e}try{return await M(t,{...e,compression:null})}catch(h){try{return await M(t,{...e,compression:"deflate-raw"})}catch{throw h}}}if(s===void 0)try{return await M(t,{...e,endian:"big"})}catch(h){try{return await M(t,{...e,endian:"little"})}catch{try{return await M(t,{...e,endian:"little-varint"})}catch{throw h}}}if(n===void 0)try{return await M(t,{...e,rootName:!0})}catch(h){try{return await M(t,{...e,rootName:!1})}catch{throw h}}return o!==null&&(t=await Ve(t,o)),f===void 0&&(f=r.hasBedrockLevelHeader(s)),r.readRoot({rootName:n,endian:s,compression:o,bedrockLevel:f,strict:d})}var p,E,L,N,x,oe,i,T,re,ne,We,Q,Ze,Xe,pe,z,qe,W,be,Qe,Je,Ke,Ge,se,et,tt,rt,nt;class or{constructor(e,r,n){A(this,i);A(this,p,0);A(this,E);A(this,L);A(this,N);A(this,x);A(this,oe,new tr);_(this,E,e),_(this,L,new DataView(e.buffer,e.byteOffset,e.byteLength)),_(this,N,r),_(this,x,n)}hasGzipHeader(){return a(this,L).getUint16(0,!1)===8075}hasZlibHeader(){return a(this,L).getUint8(0)===120}hasBedrockLevelHeader(e){return e!=="little"||a(this,E).byteLength<8?!1:a(this,L).getUint32(4,!0)===a(this,E).byteLength-8}async readRoot({rootName:e,endian:r,compression:n,bedrockLevel:s,strict:o}){n!==null&&(_(this,E,await Ve(a(this,E),n)),_(this,L,new DataView(a(this,E).buffer))),s&&(u(this,i,pe).call(this),u(this,i,pe).call(this));const f=u(this,i,ne).call(this);if(f!==c.LIST&&f!==c.COMPOUND)throw new Error(`Expected an opening List or Compound tag at the start of the buffer, encountered tag type '${f}'`);const d=typeof e=="string"||e?u(this,i,se).call(this):null;if(typeof e=="string"&&d!==e)throw new Error(`Expected root name '${e}', encountered '${d}'`);const h=u(this,i,re).call(this,f);if(o&&a(this,E).byteLength>a(this,p)){const l=a(this,E).byteLength-a(this,p);throw new Error(`Encountered unexpected End tag at byte offset ${a(this,p)}, ${l} unread bytes remaining`)}const g=new ae(h,{rootName:d,endian:r,compression:n,bedrockLevel:s});return o||(g.byteOffset=a(this,p)),g}}p=new WeakMap,E=new WeakMap,L=new WeakMap,N=new WeakMap,x=new WeakMap,oe=new WeakMap,i=new WeakSet,T=function(e){if(a(this,p)+e>a(this,E).byteLength)throw new Error("Ran out of bytes to read, unexpectedly reached the end of the buffer")},re=function(e){switch(e){case c.END:{const r=a(this,E).byteLength-a(this,p);throw new Error(`Encountered unexpected End tag at byte offset ${a(this,p)}, ${r} unread bytes remaining`)}case c.BYTE:return u(this,i,Q).call(this);case c.SHORT:return u(this,i,Xe).call(this);case c.INT:return a(this,x)?u(this,i,W).call(this):u(this,i,z).call(this);case c.LONG:return a(this,x)?u(this,i,Qe).call(this):u(this,i,be).call(this);case c.FLOAT:return u(this,i,Je).call(this);case c.DOUBLE:return u(this,i,Ke).call(this);case c.BYTE_ARRAY:return u(this,i,Ge).call(this);case c.STRING:return u(this,i,se).call(this);case c.LIST:return u(this,i,et).call(this);case c.COMPOUND:return u(this,i,tt).call(this);case c.INT_ARRAY:return u(this,i,rt).call(this);case c.LONG_ARRAY:return u(this,i,nt).call(this);default:throw new Error(`Encountered unsupported tag type '${e}' at byte offset ${a(this,p)}`)}},ne=function(){const e=u(this,i,We).call(this);if(!nr(e))throw new Error(`Encountered unsupported tag type '${e}' at byte offset ${a(this,p)}`);return e},We=function(){u(this,i,T).call(this,1);const e=a(this,L).getUint8(a(this,p));return _(this,p,a(this,p)+1),e},Q=function(e=!1){u(this,i,T).call(this,1);const r=a(this,L).getInt8(a(this,p));return _(this,p,a(this,p)+1),e?r:new Pe(r)},Ze=function(){u(this,i,T).call(this,2);const e=a(this,L).getUint16(a(this,p),a(this,N));return _(this,p,a(this,p)+2),e},Xe=function(e=!1){u(this,i,T).call(this,2);const r=a(this,L).getInt16(a(this,p),a(this,N));return _(this,p,a(this,p)+2),e?r:new ze(r)},pe=function(){u(this,i,T).call(this,4);const e=a(this,L).getUint32(a(this,p),a(this,N));return _(this,p,a(this,p)+4),e},z=function(e=!1){u(this,i,T).call(this,4);const r=a(this,L).getInt32(a(this,p),a(this,N));return _(this,p,a(this,p)+4),e?r:new ye(r)},qe=function(){let e=0,r=0,n;for(;n=u(this,i,Q).call(this,!0),e|=(n&127)<<r,!!(n&128);)r+=7;return e},W=function(e=!1){let r=0,n=0;for(;;){u(this,i,T).call(this,1);const o=u(this,i,Q).call(this,!0);if(r|=(o&127)<<n,!(o&128))break;if(n+=7,n>63)throw new Error(`VarInt size '${n}' at byte offset ${a(this,p)} is too large`)}const s=(r<<63>>63^r)>>1^r&1<<63;return e?s:new ye(s)},be=function(){u(this,i,T).call(this,8);const e=a(this,L).getBigInt64(a(this,p),a(this,N));return _(this,p,a(this,p)+8),e},Qe=function(){let e=0n,r=0n;for(;;){u(this,i,T).call(this,1);const s=u(this,i,Q).call(this,!0);if(e|=(BigInt(s)&0x7fn)<<r,!(s&128))break;if(r+=7n,r>63n)throw new Error(`VarLong size '${r}' at byte offset ${a(this,p)} is too large`)}return e>>1n^-(e&1n)},Je=function(e=!1){u(this,i,T).call(this,4);const r=a(this,L).getFloat32(a(this,p),a(this,N));return _(this,p,a(this,p)+4),e?r:new He(r)},Ke=function(){u(this,i,T).call(this,8);const e=a(this,L).getFloat64(a(this,p),a(this,N));return _(this,p,a(this,p)+8),e},Ge=function(){const e=a(this,x)?u(this,i,W).call(this,!0):u(this,i,z).call(this,!0);u(this,i,T).call(this,e);const r=new Int8Array(a(this,E).subarray(a(this,p),a(this,p)+e));return _(this,p,a(this,p)+e),r},se=function(){const e=a(this,x)?u(this,i,qe).call(this):u(this,i,Ze).call(this);u(this,i,T).call(this,e);const r=a(this,oe).decode(a(this,E).subarray(a(this,p),a(this,p)+e));return _(this,p,a(this,p)+e),r},et=function(){const e=u(this,i,ne).call(this),r=a(this,x)?u(this,i,W).call(this,!0):u(this,i,z).call(this,!0),n=[];Object.defineProperty(n,rr,{configurable:!0,enumerable:!1,writable:!0,value:e});for(let s=0;s<r;s++){const o=u(this,i,re).call(this,e);n.push(o)}return n},tt=function(){const e={};for(;;){const r=u(this,i,ne).call(this);if(r===c.END)break;const n=u(this,i,se).call(this),s=u(this,i,re).call(this,r);e[n]=s}return e},rt=function(){const e=a(this,x)?u(this,i,W).call(this,!0):u(this,i,z).call(this,!0),r=new Int32Array(e);for(const n in r){const s=u(this,i,z).call(this,!0);r[n]=s}return r},nt=function(){const e=a(this,x)?u(this,i,W).call(this,!0):u(this,i,z).call(this,!0),r=new BigInt64Array(e);for(const n in r){const s=u(this,i,be).call(this);r[n]=s}return r};function fr(t,{space:e=""}={}){if(t instanceof ae&&(t=t.data),typeof t!="object"||t===null)throw new TypeError("First parameter must be an object or array");if(typeof e!="string"&&typeof e!="number")throw new TypeError("Space option must be a string or number");return e=typeof e=="number"?" ".repeat(e):e,cr(t,e,1)}function cr(t,e,r){const n=Y(t);if(n!==c.LIST&&n!==c.COMPOUND)throw new TypeError("Encountered unexpected Root tag type, must be either a List or Compound tag");return Le(t,e,r)}function Le(t,e,r){const n=Y(t);switch(n){case c.BYTE:return st(t);case c.SHORT:return ur(t);case c.INT:return it(t);case c.LONG:return at(t);case c.FLOAT:return lr(t);case c.DOUBLE:return hr(t);case c.BYTE_ARRAY:return dr(t);case c.STRING:return ot(t);case c.LIST:return gr(t,e,r);case c.COMPOUND:return yr(t,e,r);case c.INT_ARRAY:return pr(t);case c.LONG_ARRAY:return br(t);default:throw new Error(`Encountered unsupported tag type '${n}'`)}}function st(t){return typeof t=="boolean"?`${t}`:`${t.valueOf()}b`}function ur(t){return`${t.valueOf()}s`}function it(t){return`${t.valueOf()}`}function at(t){return`${t}l`}function lr(t){return`${t.valueOf()}${Number.isInteger(t.valueOf())?".0":""}f`}function hr(t){return`${t}${!Number.isInteger(t)||t.toExponential()===t.toString()?"":".0"}d`}function dr(t){return`[B;${[...t].map(e=>st(e)).join()}]`}function ot(t){const e=Se(t.replace(/['\\]/g,n=>`\\${n}`)),r=Se(t.replace(/["\\]/g,n=>`\\${n}`));return e.length<r.length?`'${e}'`:`"${r}"`}function Se(t){return t.replaceAll("\0","\\0").replaceAll("\b","\\b").replaceAll("\f","\\f").replaceAll(`
`,"\\n").replaceAll("\r","\\r").replaceAll("	","\\t")}function gr(t,e,r){t=t.filter(je);const n=e!=="",s=t[0]!==void 0?Y(t[0]):c.END,o=n&&new Set([c.BYTE_ARRAY,c.LIST,c.COMPOUND,c.INT_ARRAY,c.LONG_ARRAY]).has(s);return`[${t.map(f=>`${o?`
${e.repeat(r)}`:""}${(()=>{if(Y(f)!==s)throw new TypeError("Encountered unexpected item type in array, all tags in a List tag must be of the same type");return Le(f,e,r+1)})()}`).join(`,${n&&!o?" ":""}`)}${o?`
${e.repeat(r-1)}`:""}]`}function yr(t,e,r){const n=e!=="";return`{${Object.entries(t).filter(s=>je(s[1])).map(([s,o])=>`${n?`
${e.repeat(r)}`:""}${/^[0-9a-z_\-.+]+$/i.test(s)?s:ot(s)}:${n?" ":""}${Le(o,e,r+1)}`).join(",")}${n&&Object.keys(t).length!==0?`
${e.repeat(r-1)}`:""}}`}function pr(t){return`[I;${[...t].map(e=>it(e)).join()}]`}function br(t){return`[L;${[...t].map(e=>at(e)).join()}]`}function vr(t){var r,n,s;console.log(fr(t,{space:4}));const e=t.level;return{name:(r=t.name)==null?void 0:r.valueOf(),version:(n=t.version)==null?void 0:n.valueOf(),level:{sections:e.sections.length,width:(s=e.totalX)==null?void 0:s.valueOf()}}}function mr(t){const e=t.version;if(!e)return wr(t);switch(e.valueOf()){case 1:return vr(t)}}function wr(t){console.log(t)}async function $e(t){const e=await t.arrayBuffer();return await M(e)}function _r(t){const e=[],r=t.data;for(const n in r){const s=t.data[n];if(Y(s)===c.LIST)for(const o of s){if(Y(o)!==c.COMPOUND)continue;const f=o.components;if(!f)continue;const d=f["minecraft:custom_data"];d&&d.level&&e.push(d)}}return e}function Lr(t){const e=[],r=t.data.data.contents;return r?(e.push(...ve(r)),console.log({contents:r,foundLevels:e}),e):[]}function ve(t){const e=[],r=Y(t);if(r===c.COMPOUND){const n=t;if(n.name&&n.totalX&&n.sections)return[n];for(const s in n){const o=n[s];e.push(...ve(o))}}if(r===c.LIST)for(const n of t)e.push(...ve(n));return e}var Er=me('<label id="dropContainer" for="hotbars">Drop your hotbar.nbt or command_storage_*.dat here or <div id="dropContainerClick" class="svelte-1he5s0d">click here</div> to select the file(s). <input type="file" name="hotbars" id="hotbars" hidden accept=".nbt, .dat" multiple></label>');function Or(t,e){we(e,!0);let r,n=Ut(!1),s;const o=y=>{y.addEventListener("dragenter",f),y.addEventListener("dragleave",f),y.addEventListener("dragover",f),y.addEventListener("drop",f),y.addEventListener("drop",d)};function f(y){switch(y.preventDefault(),y.stopPropagation(),y.type){case"dragenter":case"dragover":{Re(n,!0);break}case"drop":case"dragleave":{Re(n,!1);break}}}function d(y){const b=y.dataTransfer,v=b==null?void 0:b.files;v&&e.fileInput(v)}function h(y){e.fileInput(s)}var g=Er(),l=Z(V(g),3);l.__change=h,H(g),qt(g,y=>o==null?void 0:o(y)),zt(g,y=>r=y,()=>r),Ce(()=>Kt(g,Jt([{highlight:D(n)}]),"svelte-1he5s0d")),er(l,()=>s,y=>s=y),ie(t,g),_e()}Ft(["change"]);var Tr=me('<div class="level svelte-xt904n"><span class="level-name svelte-xt904n"> </span> <span class="level-info level-sections svelte-xt904n"> </span> <span class="level-info level-size svelte-xt904n"> </span> <span class="level-info level-version svelte-xt904n"> </span></div>');function Ir(t,e){we(e,!0);let r=Ct(()=>mr(e.level));var n=ht(),s=Me(n);{var o=f=>{var d=Tr(),h=V(d),g=V(h,!0);H(h);var l=Z(h,2),y=V(l);H(l);var b=Z(l,2),v=V(b);H(b);var m=Z(b,2),B=V(m);H(m),H(d),Ce(()=>{G(g,D(r).name),G(y,`sections: ${D(r).level.sections??""}`),G(v,`width: ${D(r).level.width??""}`),G(B,`v${D(r).version??""}`)}),ie(f,d)};Ht(s,f=>{D(r)&&f(o)})}ie(t,n),_e()}var Nr=me('<h1>Tunnel Rats Map Sharer</h1> <!> <div class="foundLevelWrapper svelte-1hmvaxy"></div>',1);function Cr(t,e){we(e,!0);let r=Yt([]);async function n(d){if(d){for(const h of d)if(h.name.endsWith(".nbt")){const g=await $e(h),l=_r(g);r.push(...l)}else if(h.name.endsWith(".dat")){const g=await $e(h),l=Lr(g);r.push(...l)}}}var s=Nr();kt(d=>{Mt.title="Upload - Tunnel Rats"});var o=Z(Me(s),2);Or(o,{fileInput:n});var f=Z(o,2);Wt(f,21,()=>r,jt,(d,h)=>{Ir(d,{get level(){return D(h)}})}),H(f),ie(t,s),_e()}export{Cr as component};
