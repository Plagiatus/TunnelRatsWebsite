var dt=Object.defineProperty;var Ie=t=>{throw TypeError(t)};var gt=(t,e,r)=>e in t?dt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var V=(t,e,r)=>gt(t,typeof e!="symbol"?e+"":e,r),le=(t,e,r)=>e.has(t)||Ie("Cannot "+r);var a=(t,e,r)=>(le(t,e,"read from private field"),r?r.call(t):e.get(t)),A=(t,e,r)=>e.has(t)?Ie("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),w=(t,e,r,n)=>(le(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),u=(t,e,r)=>(le(t,e,"access private method"),r);import{t as _e,a as ie,c as yt}from"../chunks/DLK54OfJ.js";import{T as Ne,V as xe,W as pt,i as ye,X as vt,q as bt,t as he,n as R,$ as mt,p as _t,g as D,an as wt,H as Lt,r as Re,v as de,z as X,a2 as Et,w as Me,x as Ce,y as Ot,ar as ge,a6 as Ye,as as Tt,af as It,s as Ae,at as Nt,au as xt,a5 as Rt,av as At,aw as St,ax as $t,ay as Dt,_ as Bt,m as Ut,A as Mt,a as Ct,B as Yt,K as we,Q as Z,M as ke,N as Le,O as j,P as H,ap as kt,f as Se,L as Fe,J as Ft,az as Pt}from"../chunks/BcZNf7Qz.js";import{d as zt,s as G,a as Ht}from"../chunks/By-zitiw.js";import{b as Vt,i as jt,p as Wt}from"../chunks/BISBGRsa.js";let $e=!1;function Zt(){$e||($e=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(const r of t.target.elements)(e=r.__on_r)==null||e.call(r)})},{capture:!0}))}function Xt(t){var e=pt,r=ye;Ne(null),xe(null);try{return t()}finally{Ne(e),xe(r)}}function Qt(t,e,r,n=r){t.addEventListener(e,()=>Xt(r));const s=t.__on_r;s?t.__on_r=()=>{s(),n(!0)}:t.__on_r=()=>n(!0),Zt()}function qt(t,e){return e}function Jt(t,e,r,n){for(var s=[],o=e.length,f=0;f<o;f++)xt(e[f].e,s,!0);var d=o>0&&s.length===0&&r!==null;if(d){var h=r.parentNode;Rt(h),h.append(r),n.clear(),Y(t,e[0].prev,e[o-1].next)}At(s,()=>{for(var g=0;g<o;g++){var l=e[g];d||(n.delete(l.k),Y(t,l.prev,l.next)),St(l.e,!d)}})}function Kt(t,e,r,n,s,o=null){var f=t,d={items:new Map,first:null};{var h=t;f=R?he(mt(h)):h.appendChild(vt())}R&&_t();var g=null,l=!1,y=wt(()=>{var v=r();return Ut(v)?v:v==null?[]:Ye(v)});bt(()=>{var v=D(y),b=v.length;if(l&&b===0)return;l=b===0;let m=!1;if(R){var B=f.data===Lt;B!==(b===0)&&(f=Re(),he(f),de(!1),m=!0)}if(R){for(var U=null,_,O=0;O<b;O++){if(X.nodeType===8&&X.data===Et){f=X,m=!0,de(!1);break}var K=v[O],F=n(K,O);_=Pe(X,d,U,null,K,F,O,s,e,r),d.items.set(F,_),U=_}b>0&&he(Re())}R||Gt(v,d,f,s,e,n,r),o!==null&&(b===0?g?Me(g):g=Ce(()=>o(f)):g!==null&&Ot(g,()=>{g=null})),m&&de(!0),D(y)}),R&&(f=X)}function Gt(t,e,r,n,s,o,f){var d=t.length,h=e.items,g=e.first,l=g,y,v=null,b=[],m=[],B,U,_,O;for(O=0;O<d;O+=1){if(B=t[O],U=o(B,O),_=h.get(U),_===void 0){var K=l?l.e.nodes_start:r;v=Pe(K,e,v,v===null?e.first:v.next,B,U,O,n,s,f),h.set(U,v),b=[],m=[],l=v.next;continue}if(er(_,B,O),_.e.f&ge&&Me(_.e),_!==l){if(y!==void 0&&y.has(_)){if(b.length<m.length){var F=m[0],M;v=F.prev;var Te=b[0],ce=b[b.length-1];for(M=0;M<b.length;M+=1)De(b[M],F,r);for(M=0;M<m.length;M+=1)y.delete(m[M]);Y(e,Te.prev,ce.next),Y(e,v,Te),Y(e,ce,F),l=F,v=ce,O-=1,b=[],m=[]}else y.delete(_),De(_,l,r),Y(e,_.prev,_.next),Y(e,_,v===null?e.first:v.next),Y(e,v,_),v=_;continue}for(b=[],m=[];l!==null&&l.k!==U;)l.e.f&ge||(y??(y=new Set)).add(l),m.push(l),l=l.next;if(l===null)continue;_=l}b.push(_),v=_,l=_.next}if(l!==null||y!==void 0){for(var ue=y===void 0?[]:Ye(y);l!==null;)l.e.f&ge||ue.push(l),l=l.next;var lt=ue.length;if(lt>0){var ht=d===0?r:null;Jt(e,ue,ht,h)}}ye.first=e.first&&e.first.e,ye.last=v&&v.e}function er(t,e,r,n){Tt(t.v,e),t.i=r}function Pe(t,e,r,n,s,o,f,d,h,g){var l=(h&$t)!==0,y=(h&Dt)===0,v=l?y?It(s):Ae(s):s,b=h&Nt?Ae(f):f,m={i:b,v,k:o,a:null,e:null,prev:r,next:n};try{return m.e=Ce(()=>d(t,v,b,g),R),m.e.prev=r&&r.e,m.e.next=n&&n.e,r===null?e.first=m:(r.next=m,r.e.next=m.e),n!==null&&(n.prev=m,n.e.prev=m.e),m}finally{}}function De(t,e,r){for(var n=t.next?t.next.e.nodes_start:r,s=e?e.e.nodes_start:r,o=t.e.nodes_start;o!==n;){var f=Bt(o);s.before(o),o=f}}function Y(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function tr(t,e,r){Mt(()=>{var n=Ct(()=>e(t,r==null?void 0:r())||{});if(n!=null&&n.destroy)return()=>n.destroy()})}function ze(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(r=ze(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function rr(){for(var t,e,r=0,n="",s=arguments.length;r<s;r++)(t=arguments[r])&&(e=ze(t))&&(n&&(n+=" "),n+=e);return n}function nr(t){return typeof t=="object"?rr(t):t??""}function sr(t,e,r){var n=t.__className,s=ir(e,r);R&&t.className===s?t.__className=s:(n!==s||R&&t.className!==s)&&(t.className=s,t.__className=s)}function ir(t,e){return(t??"")+(" "+e)}function ar(t,e,r=e){Qt(t,"change",()=>{r(t.files)}),R&&t.files&&r(t.files),Yt(()=>{t.files=e()})}/**
 * @module mutf-8
 * @copyright 2020 sciencesakura
 * @license MIT
 */var I=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Q=function(t,e,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r},S,ee,te,$,He,P;class or{get encoding(){return"mutf-8"}get fatal(){return I(this,ee,"f")}get ignoreBOM(){return I(this,te,"f")}constructor(e="mutf-8",r={}){var n,s;S.add(this),ee.set(this,void 0),te.set(this,void 0),$.set(this,void 0);const o=e.toLowerCase();if(o!=="mutf-8"&&o!=="mutf8")throw new RangeError(`MUtf8Decoder.constructor: '${e}' is not supported.`);Q(this,ee,(n=r.fatal)!==null&&n!==void 0?n:!1,"f"),Q(this,te,(s=r.ignoreBOM)!==null&&s!==void 0?s:!1,"f")}decode(e,r={}){var n;const s=(n=r.stream)!==null&&n!==void 0?n:!1,o=I(this,S,"m",He).call(this,e),f=o.length,d=[];let h=0;for(;h<f;){const g=o[h++];if(!(g&128)&&g!==0)d.push(String.fromCharCode(g));else if((g&224)===192){if(f<=h){if(s){Q(this,$,o.slice(h-1),"f");break}d.push(I(this,S,"m",P).call(this));continue}const l=o[h++];if((l&192)!==128){d.push(I(this,S,"m",P).call(this)),h--;continue}d.push(String.fromCharCode((g&31)<<6|l&63))}else if((g&240)===224){if(f<=h+1){if(s){Q(this,$,o.slice(h-1),"f");break}d.push(I(this,S,"m",P).call(this));continue}const l=o[h++];if((l&192)!==128){d.push(I(this,S,"m",P).call(this)),h--;continue}const y=o[h++];if((y&192)!==128){d.push(I(this,S,"m",P).call(this)),h-=2;continue}if(h===3&&g===239&&l===187&&y===191&&!this.ignoreBOM)continue;d.push(String.fromCharCode((g&15)<<12|(l&63)<<6|y&63))}else d.push(I(this,S,"m",P).call(this))}return d.join("")}}ee=new WeakMap,te=new WeakMap,$=new WeakMap,S=new WeakSet,He=function(e){let r;if(e instanceof Uint8Array?r=e:r=new Uint8Array("buffer"in e?e.buffer:e),!I(this,$,"f"))return r;const n=new Uint8Array(I(this,$,"f").length+r.length);return n.set(I(this,$,"f"),0),n.set(r,I(this,$,"f").length),Q(this,$,void 0,"f"),n},P=function(){if(this.fatal)throw new TypeError("MUtf8Decoder.decode: Decoding failed.");return"ï¿½"};var J;const Oe=class Oe{constructor(e,r={}){V(this,"data");V(this,"rootName");V(this,"endian");V(this,"compression");V(this,"bedrockLevel");A(this,J,null);e instanceof Oe&&(r.rootName===void 0&&(r.rootName=e.rootName),r.endian===void 0&&(r.endian=e.endian),r.compression===void 0&&(r.compression=e.compression),r.bedrockLevel===void 0&&(r.bedrockLevel=e.bedrockLevel),e=e.data);const{rootName:n="",endian:s="big",compression:o=null,bedrockLevel:f=!1}=r;this.data=e,this.rootName=n,this.endian=s,this.compression=o,this.bedrockLevel=f}get byteOffset(){return a(this,J)}set byteOffset(e){w(this,J,e)}get[Symbol.toStringTag](){return"NBTData"}};J=new WeakMap;let ae=Oe;const fe=Symbol.for("nodejs.util.inspect.custom");class Ve extends Number{constructor(e){super(e<<24>>24)}valueOf(){return super.valueOf()}get[Symbol.toStringTag](){return"Int8"}get[fe](){return(e,{stylize:r})=>r(`${this.valueOf()}b`,"number")}}class je extends Number{constructor(e){super(e<<16>>16)}valueOf(){return super.valueOf()}get[Symbol.toStringTag](){return"Int16"}get[fe](){return(e,{stylize:r})=>r(`${this.valueOf()}s`,"number")}}class pe extends Number{constructor(e){super(e|0)}valueOf(){return super.valueOf()}get[Symbol.toStringTag](){return"Int32"}get[fe](){return()=>this.valueOf()}}class We extends Number{constructor(e){super(e)}valueOf(){return super.valueOf()}get[Symbol.toStringTag](){return"Float32"}get[fe](){return(e,{stylize:r})=>r(`${this.valueOf()}f`,"number")}}var c;(function(t){t[t.END=0]="END",t[t.BYTE=1]="BYTE",t[t.SHORT=2]="SHORT",t[t.INT=3]="INT",t[t.LONG=4]="LONG",t[t.FLOAT=5]="FLOAT",t[t.DOUBLE=6]="DOUBLE",t[t.BYTE_ARRAY=7]="BYTE_ARRAY",t[t.STRING=8]="STRING",t[t.LIST=9]="LIST",t[t.COMPOUND=10]="COMPOUND",t[t.INT_ARRAY=11]="INT_ARRAY",t[t.LONG_ARRAY=12]="LONG_ARRAY"})(c||(c={}));Object.freeze(c);const fr=Symbol("nbtify.tag.type");function Ze(t){return k(t)!==null}function cr(t){return typeof t=="number"&&t in c}function k(t){switch(!0){case t instanceof Ve:case typeof t=="boolean":return c.BYTE;case t instanceof je:return c.SHORT;case t instanceof pe:return c.INT;case typeof t=="bigint":return c.LONG;case t instanceof We:return c.FLOAT;case typeof t=="number":return c.DOUBLE;case t instanceof Int8Array:case t instanceof Uint8Array:return c.BYTE_ARRAY;case typeof t=="string":return c.STRING;case t instanceof Array:return c.LIST;case t instanceof Int32Array:case t instanceof Uint32Array:return c.INT_ARRAY;case t instanceof BigInt64Array:case t instanceof BigUint64Array:return c.LONG_ARRAY;case(typeof t=="object"&&t!==null):return c.COMPOUND;default:return null}}async function Xe(t,e){const r=new DecompressionStream(e);return ur(t,r)}async function ur(t,{readable:e,writable:r}){const n=r.getWriter();n.write(t).catch(()=>{}),n.close().catch(()=>{});const s=[];let o=0;const f=lr(e);for await(const g of f)s.push(g),o+=g.byteLength;const d=new Uint8Array(o);let h=0;for(const g of s)d.set(g,h),h+=g.byteLength;return d}function lr(t){return typeof t[Symbol.asyncIterator]>"u"?hr(t):t}async function*hr(t){const e=t.getReader();try{for(;;){const{done:r,value:n}=await e.read();if(r)return;yield n}}finally{e.releaseLock()}}async function C(t,e={}){if(t instanceof Blob&&(t=await t.arrayBuffer()),"byteOffset"in t||(t=new Uint8Array(t)),!(t instanceof Uint8Array))throw new TypeError("First parameter must be a Uint8Array, ArrayBuffer, SharedArrayBuffer, or Blob");const r=new dr(t,e.endian!=="big",e.endian==="little-varint");let{rootName:n,endian:s,compression:o,bedrockLevel:f,strict:d=!0}=e;if(n!==void 0&&typeof n!="boolean"&&typeof n!="string"&&n!==null)throw new TypeError("Root Name option must be a boolean, string, or null");if(s!==void 0&&s!=="big"&&s!=="little"&&s!=="little-varint")throw new TypeError("Endian option must be a valid endian type");if(o!==void 0&&o!=="deflate"&&o!=="deflate-raw"&&o!=="gzip"&&o!==null)throw new TypeError("Compression option must be a valid compression type");if(f!==void 0&&typeof f!="boolean"&&typeof f!="number"&&f!==null)throw new TypeError("Bedrock Level option must be a boolean, number, or null");if(typeof d!="boolean")throw new TypeError("Strict option must be a boolean");e:if(o===void 0){switch(!0){case r.hasGzipHeader():o="gzip";break e;case r.hasZlibHeader():o="deflate";break e}try{return await C(t,{...e,compression:null})}catch(h){try{return await C(t,{...e,compression:"deflate-raw"})}catch{throw h}}}if(s===void 0)try{return await C(t,{...e,endian:"big"})}catch(h){try{return await C(t,{...e,endian:"little"})}catch{try{return await C(t,{...e,endian:"little-varint"})}catch{throw h}}}if(n===void 0)try{return await C(t,{...e,rootName:!0})}catch(h){try{return await C(t,{...e,rootName:!1})}catch{throw h}}return o!==null&&(t=await Xe(t,o)),f===void 0&&(f=r.hasBedrockLevelHeader(s)),r.readRoot({rootName:n,endian:s,compression:o,bedrockLevel:f,strict:d})}var p,E,L,N,x,oe,i,T,re,ne,Qe,q,qe,Je,ve,z,Ke,W,be,Ge,et,tt,rt,se,nt,st,it,at;class dr{constructor(e,r,n){A(this,i);A(this,p,0);A(this,E);A(this,L);A(this,N);A(this,x);A(this,oe,new or);w(this,E,e),w(this,L,new DataView(e.buffer,e.byteOffset,e.byteLength)),w(this,N,r),w(this,x,n)}hasGzipHeader(){return a(this,L).getUint16(0,!1)===8075}hasZlibHeader(){return a(this,L).getUint8(0)===120}hasBedrockLevelHeader(e){return e!=="little"||a(this,E).byteLength<8?!1:a(this,L).getUint32(4,!0)===a(this,E).byteLength-8}async readRoot({rootName:e,endian:r,compression:n,bedrockLevel:s,strict:o}){n!==null&&(w(this,E,await Xe(a(this,E),n)),w(this,L,new DataView(a(this,E).buffer))),s&&(u(this,i,ve).call(this),u(this,i,ve).call(this));const f=u(this,i,ne).call(this);if(f!==c.LIST&&f!==c.COMPOUND)throw new Error(`Expected an opening List or Compound tag at the start of the buffer, encountered tag type '${f}'`);const d=typeof e=="string"||e?u(this,i,se).call(this):null;if(typeof e=="string"&&d!==e)throw new Error(`Expected root name '${e}', encountered '${d}'`);const h=u(this,i,re).call(this,f);if(o&&a(this,E).byteLength>a(this,p)){const l=a(this,E).byteLength-a(this,p);throw new Error(`Encountered unexpected End tag at byte offset ${a(this,p)}, ${l} unread bytes remaining`)}const g=new ae(h,{rootName:d,endian:r,compression:n,bedrockLevel:s});return o||(g.byteOffset=a(this,p)),g}}p=new WeakMap,E=new WeakMap,L=new WeakMap,N=new WeakMap,x=new WeakMap,oe=new WeakMap,i=new WeakSet,T=function(e){if(a(this,p)+e>a(this,E).byteLength)throw new Error("Ran out of bytes to read, unexpectedly reached the end of the buffer")},re=function(e){switch(e){case c.END:{const r=a(this,E).byteLength-a(this,p);throw new Error(`Encountered unexpected End tag at byte offset ${a(this,p)}, ${r} unread bytes remaining`)}case c.BYTE:return u(this,i,q).call(this);case c.SHORT:return u(this,i,Je).call(this);case c.INT:return a(this,x)?u(this,i,W).call(this):u(this,i,z).call(this);case c.LONG:return a(this,x)?u(this,i,Ge).call(this):u(this,i,be).call(this);case c.FLOAT:return u(this,i,et).call(this);case c.DOUBLE:return u(this,i,tt).call(this);case c.BYTE_ARRAY:return u(this,i,rt).call(this);case c.STRING:return u(this,i,se).call(this);case c.LIST:return u(this,i,nt).call(this);case c.COMPOUND:return u(this,i,st).call(this);case c.INT_ARRAY:return u(this,i,it).call(this);case c.LONG_ARRAY:return u(this,i,at).call(this);default:throw new Error(`Encountered unsupported tag type '${e}' at byte offset ${a(this,p)}`)}},ne=function(){const e=u(this,i,Qe).call(this);if(!cr(e))throw new Error(`Encountered unsupported tag type '${e}' at byte offset ${a(this,p)}`);return e},Qe=function(){u(this,i,T).call(this,1);const e=a(this,L).getUint8(a(this,p));return w(this,p,a(this,p)+1),e},q=function(e=!1){u(this,i,T).call(this,1);const r=a(this,L).getInt8(a(this,p));return w(this,p,a(this,p)+1),e?r:new Ve(r)},qe=function(){u(this,i,T).call(this,2);const e=a(this,L).getUint16(a(this,p),a(this,N));return w(this,p,a(this,p)+2),e},Je=function(e=!1){u(this,i,T).call(this,2);const r=a(this,L).getInt16(a(this,p),a(this,N));return w(this,p,a(this,p)+2),e?r:new je(r)},ve=function(){u(this,i,T).call(this,4);const e=a(this,L).getUint32(a(this,p),a(this,N));return w(this,p,a(this,p)+4),e},z=function(e=!1){u(this,i,T).call(this,4);const r=a(this,L).getInt32(a(this,p),a(this,N));return w(this,p,a(this,p)+4),e?r:new pe(r)},Ke=function(){let e=0,r=0,n;for(;n=u(this,i,q).call(this,!0),e|=(n&127)<<r,!!(n&128);)r+=7;return e},W=function(e=!1){let r=0,n=0;for(;;){u(this,i,T).call(this,1);const o=u(this,i,q).call(this,!0);if(r|=(o&127)<<n,!(o&128))break;if(n+=7,n>63)throw new Error(`VarInt size '${n}' at byte offset ${a(this,p)} is too large`)}const s=(r<<63>>63^r)>>1^r&1<<63;return e?s:new pe(s)},be=function(){u(this,i,T).call(this,8);const e=a(this,L).getBigInt64(a(this,p),a(this,N));return w(this,p,a(this,p)+8),e},Ge=function(){let e=0n,r=0n;for(;;){u(this,i,T).call(this,1);const s=u(this,i,q).call(this,!0);if(e|=(BigInt(s)&0x7fn)<<r,!(s&128))break;if(r+=7n,r>63n)throw new Error(`VarLong size '${r}' at byte offset ${a(this,p)} is too large`)}return e>>1n^-(e&1n)},et=function(e=!1){u(this,i,T).call(this,4);const r=a(this,L).getFloat32(a(this,p),a(this,N));return w(this,p,a(this,p)+4),e?r:new We(r)},tt=function(){u(this,i,T).call(this,8);const e=a(this,L).getFloat64(a(this,p),a(this,N));return w(this,p,a(this,p)+8),e},rt=function(){const e=a(this,x)?u(this,i,W).call(this,!0):u(this,i,z).call(this,!0);u(this,i,T).call(this,e);const r=new Int8Array(a(this,E).subarray(a(this,p),a(this,p)+e));return w(this,p,a(this,p)+e),r},se=function(){const e=a(this,x)?u(this,i,Ke).call(this):u(this,i,qe).call(this);u(this,i,T).call(this,e);const r=a(this,oe).decode(a(this,E).subarray(a(this,p),a(this,p)+e));return w(this,p,a(this,p)+e),r},nt=function(){const e=u(this,i,ne).call(this),r=a(this,x)?u(this,i,W).call(this,!0):u(this,i,z).call(this,!0),n=[];Object.defineProperty(n,fr,{configurable:!0,enumerable:!1,writable:!0,value:e});for(let s=0;s<r;s++){const o=u(this,i,re).call(this,e);n.push(o)}return n},st=function(){const e={};for(;;){const r=u(this,i,ne).call(this);if(r===c.END)break;const n=u(this,i,se).call(this),s=u(this,i,re).call(this,r);e[n]=s}return e},it=function(){const e=a(this,x)?u(this,i,W).call(this,!0):u(this,i,z).call(this,!0),r=new Int32Array(e);for(const n in r){const s=u(this,i,z).call(this,!0);r[n]=s}return r},at=function(){const e=a(this,x)?u(this,i,W).call(this,!0):u(this,i,z).call(this,!0),r=new BigInt64Array(e);for(const n in r){const s=u(this,i,be).call(this);r[n]=s}return r};function gr(t,{space:e=""}={}){if(t instanceof ae&&(t=t.data),typeof t!="object"||t===null)throw new TypeError("First parameter must be an object or array");if(typeof e!="string"&&typeof e!="number")throw new TypeError("Space option must be a string or number");return e=typeof e=="number"?" ".repeat(e):e,yr(t,e,1)}function yr(t,e,r){const n=k(t);if(n!==c.LIST&&n!==c.COMPOUND)throw new TypeError("Encountered unexpected Root tag type, must be either a List or Compound tag");return Ee(t,e,r)}function Ee(t,e,r){const n=k(t);switch(n){case c.BYTE:return ot(t);case c.SHORT:return pr(t);case c.INT:return ft(t);case c.LONG:return ct(t);case c.FLOAT:return vr(t);case c.DOUBLE:return br(t);case c.BYTE_ARRAY:return mr(t);case c.STRING:return ut(t);case c.LIST:return _r(t,e,r);case c.COMPOUND:return wr(t,e,r);case c.INT_ARRAY:return Lr(t);case c.LONG_ARRAY:return Er(t);default:throw new Error(`Encountered unsupported tag type '${n}'`)}}function ot(t){return typeof t=="boolean"?`${t}`:`${t.valueOf()}b`}function pr(t){return`${t.valueOf()}s`}function ft(t){return`${t.valueOf()}`}function ct(t){return`${t}l`}function vr(t){return`${t.valueOf()}${Number.isInteger(t.valueOf())?".0":""}f`}function br(t){return`${t}${!Number.isInteger(t)||t.toExponential()===t.toString()?"":".0"}d`}function mr(t){return`[B;${[...t].map(e=>ot(e)).join()}]`}function ut(t){const e=Be(t.replace(/['\\]/g,n=>`\\${n}`)),r=Be(t.replace(/["\\]/g,n=>`\\${n}`));return e.length<r.length?`'${e}'`:`"${r}"`}function Be(t){return t.replaceAll("\0","\\0").replaceAll("\b","\\b").replaceAll("\f","\\f").replaceAll(`
`,"\\n").replaceAll("\r","\\r").replaceAll("	","\\t")}function _r(t,e,r){t=t.filter(Ze);const n=e!=="",s=t[0]!==void 0?k(t[0]):c.END,o=n&&new Set([c.BYTE_ARRAY,c.LIST,c.COMPOUND,c.INT_ARRAY,c.LONG_ARRAY]).has(s);return`[${t.map(f=>`${o?`
${e.repeat(r)}`:""}${(()=>{if(k(f)!==s)throw new TypeError("Encountered unexpected item type in array, all tags in a List tag must be of the same type");return Ee(f,e,r+1)})()}`).join(`,${n&&!o?" ":""}`)}${o?`
${e.repeat(r-1)}`:""}]`}function wr(t,e,r){const n=e!=="";return`{${Object.entries(t).filter(s=>Ze(s[1])).map(([s,o])=>`${n?`
${e.repeat(r)}`:""}${/^[0-9a-z_\-.+]+$/i.test(s)?s:ut(s)}:${n?" ":""}${Ee(o,e,r+1)}`).join(",")}${n&&Object.keys(t).length!==0?`
${e.repeat(r-1)}`:""}}`}function Lr(t){return`[I;${[...t].map(e=>ft(e)).join()}]`}function Er(t){return`[L;${[...t].map(e=>ct(e)).join()}]`}function Or(t){var r,n,s;console.log(gr(t,{space:4}));const e=t.level;return{name:(r=t.name)==null?void 0:r.valueOf(),version:(n=t.version)==null?void 0:n.valueOf(),level:{sections:e.sections.length,width:(s=e.totalX)==null?void 0:s.valueOf()}}}function Tr(t){const e=t.version;if(!e)return Ir(t);switch(e.valueOf()){case 1:return Or(t)}}function Ir(t){console.log(t)}async function Ue(t){const e=await t.arrayBuffer();return await C(e)}function Nr(t){const e=[],r=t.data;for(const n in r){const s=t.data[n];if(k(s)===c.LIST)for(const o of s){if(k(o)!==c.COMPOUND)continue;const f=o.components;if(!f)continue;const d=f["minecraft:custom_data"];d&&d.level&&e.push(d)}}return e}function xr(t){const e=[],r=t.data.data.contents;return r?(e.push(...me(r)),console.log({contents:r,foundLevels:e}),e):[]}function me(t){const e=[],r=k(t);if(r===c.COMPOUND){const n=t;if(n.name&&n.totalX&&n.sections)return[n];for(const s in n){const o=n[s];e.push(...me(o))}}if(r===c.LIST)for(const n of t)e.push(...me(n));return e}var Rr=_e('<label id="dropContainer" for="hotbars">Drop your hotbar.nbt or command_storage_*.dat here or <div id="dropContainerClick" class="svelte-1he5s0d">click here</div> to select the file(s). <input type="file" name="hotbars" id="hotbars" hidden accept=".nbt, .dat" multiple></label>');function Ar(t,e){we(e,!0);let r,n=kt(!1),s;const o=y=>{y.addEventListener("dragenter",f),y.addEventListener("dragleave",f),y.addEventListener("dragover",f),y.addEventListener("drop",f),y.addEventListener("drop",d)};function f(y){switch(y.preventDefault(),y.stopPropagation(),y.type){case"dragenter":case"dragover":{Se(n,!0);break}case"drop":case"dragleave":{Se(n,!1);break}}}function d(y){const v=y.dataTransfer,b=v==null?void 0:v.files;b&&e.fileInput(b)}function h(y){e.fileInput(s)}var g=Rr(),l=Z(j(g),3);l.__change=h,H(g),tr(g,y=>o==null?void 0:o(y)),Vt(g,y=>r=y,()=>r),ke(()=>sr(g,nr([{highlight:D(n)}]),"svelte-1he5s0d")),ar(l,()=>s,y=>s=y),ie(t,g),Le()}zt(["change"]);var Sr=_e('<div class="level svelte-xt904n"><span class="level-name svelte-xt904n"> </span> <span class="level-info level-sections svelte-xt904n"> </span> <span class="level-info level-size svelte-xt904n"> </span> <span class="level-info level-version svelte-xt904n"> </span></div>');function $r(t,e){we(e,!0);let r=Ft(()=>Tr(e.level));var n=yt(),s=Fe(n);{var o=f=>{var d=Sr(),h=j(d),g=j(h,!0);H(h);var l=Z(h,2),y=j(l);H(l);var v=Z(l,2),b=j(v);H(v);var m=Z(v,2),B=j(m);H(m),H(d),ke(()=>{G(g,D(r).name),G(y,`sections: ${D(r).level.sections??""}`),G(b,`width: ${D(r).level.width??""}`),G(B,`v${D(r).version??""}`)}),ie(f,d)};jt(s,f=>{D(r)&&f(o)})}ie(t,n),Le()}var Dr=_e('<h1>Tunnel Rats Map Sharer</h1> <!> <div class="foundLevelWrapper svelte-1hmvaxy"></div>',1);function kr(t,e){we(e,!0);let r=Wt([]);async function n(d){if(d){for(const h of d)if(h.name.endsWith(".nbt")){const g=await Ue(h),l=Nr(g);r.push(...l)}else if(h.name.endsWith(".dat")){const g=await Ue(h),l=xr(g);r.push(...l)}}}var s=Dr();Ht(d=>{Pt.title="Tunnel Rats Map Sharer"});var o=Z(Fe(s),2);Ar(o,{fileInput:n});var f=Z(o,2);Kt(f,21,()=>r,qt,(d,h)=>{$r(d,{get level(){return D(h)}})}),H(f),ie(t,s),Le()}export{kr as component};
